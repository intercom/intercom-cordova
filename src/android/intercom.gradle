def pushType = ''
new XmlSlurper().parse(file('../../config.xml')).preference.each {
    if (it.@name.text() == 'intercom-android-push-type') {
        pushType = it.@value.text().toLowerCase()
    }
}

repositories {
    jcenter()
}
dependencies {
    compile 'io.intercom.android:intercom-sdk-base:3.1.+'
    if (pushType == 'gcm') {
        compile 'io.intercom.android:intercom-sdk-gcm:3.1.+'
    } else if (pushType == 'fcm') {
        compile 'com.google.firebase:firebase-messaging:10.+'
        compile 'io.intercom.android:intercom-sdk-fcm:3.1.+'
    }
}

if (pushType == 'fcm') {
    apply plugin: 'com.google.gms.google-services'
}
